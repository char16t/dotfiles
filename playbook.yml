---
- hosts: all
  gather_facts: no
  sudo: true
  tasks:
    - name: update apt cache
      apt: update_cache=yes
    - name: apt-get install
      apt: name={{ item }} state=latest
      with_items:
        - vim-gnome
        - tree
        - cmake
        - ctags
        - git
        - subversion
        - mercurial
        - build-essential
        - automake
        - autoconf
        - autotools-dev
        - llvm
        - clang-3.5
        - lldb-3.5
        - gdb
        - flex
        - bison
        - python-pip
        - python3-pip
        - python-dev
        - python-setuptools
        - python-virtualenv
        - default-jre
        - default-jdk
        - libedit-dev
        - erlang-base
        - haskell-platform
        - nodejs-legacy
        - npm
    - name: Cabal update
      shell: cabal update
    - name: Install Hlint
      shell: cabal install hlint
    - name: Install Hunit
      shell: cabal install hunit
    - name: pip install
      pip: name={{ item }}
      with_items:
        - requests
        - pytest
        - ply
    - name: Set clang-3.5 as alias for clang
      file: src=/usr/bin/clang-3.5 dest=/usr/bin/clang state=link
    - name: Set clang-3.5++ as alias for clang++
      file: src=/usr/bin/clang++-3.5 dest=/usr/bin/clang++ state=link
    - name: Set lldb-3.5 as alias for lldb
      file: src=/usr/bin/lldb-3.5 dest=/usr/bin/lldb state=link
    - name: Install GCC and G++ 4.9 (1/4)
      shell: add-apt-repository ppa:ubuntu-toolchain-r/test
    - name: Install GCC and G++ 4.9 (2/4)
      shell: apt-get update
    - name: Install GCC and G++ 4.9 (3/4)
      apt: name={{ item }} state=latest
      with_items:
        - gcc-4.9
        - g++-4.9
    - name: Install GCC and G++ 4.9 (4/4)
      file: src=/usr/bin/gcc-4.9 dest=/usr/bin/gcc state=link
